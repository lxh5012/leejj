"use strict";(function(){function e(e){return["$rootScope","$window",function(n,o){for(var a,r,t,l=o[e]||(console.warn("This browser does not support Web Storage!"),{}),u={$default:function(e){for(var n in e)angular.isDefined(u[n])||(u[n]=e[n]);return u},$reset:function(e){for(var n in u)"$"===n[0]||delete u[n];return u.$default(e)}},g=0;g<l.length;g++)(t=l.key(g))&&"ngStorage-"===t.slice(0,10)&&(u[t.slice(10)]=angular.fromJson(l.getItem(t)));return a=angular.copy(u),n.$watch(function(){r||(r=setTimeout(function(){if(r=null,!angular.equals(u,a)){angular.forEach(u,function(e,n){angular.isDefined(e)&&"$"!==n[0]&&l.setItem("ngStorage-"+n,angular.toJson(e)),delete a[n]});for(var e in a)l.removeItem("ngStorage-"+e);a=angular.copy(u)}},100))}),"localStorage"===e&&o.addEventListener&&o.addEventListener("storage",function(e){"ngStorage-"===e.key.slice(0,10)&&(e.newValue?u[e.key.slice(10)]=angular.fromJson(e.newValue):delete u[e.key.slice(10)],a=angular.copy(u),n.$apply())}),u}]}angular.module("ngStorage",[]).factory("$localStorage",e("localStorage")).factory("$sessionStorage",e("sessionStorage"))})();