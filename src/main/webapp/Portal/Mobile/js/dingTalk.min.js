!function(e){"use strict";function i(e,i,t){for(var a in i)t?e[a]=i[a]:e[a]=void 0!==e[a]?e[a]:i[a]}function t(e,t){if("undefined"==typeof WebViewJavascriptBridge)return console.log("WebViewJavascriptBridge鏈畾涔夛紝璇峰湪閽夐拤app鎵撳紑璇ラ〉闈�");var a=t||{},o=function(i){console.log("榛樿鎴愬姛鍥炶皟",e,i)},n=function(i){console.log("榛樿澶辫触鍥炶皟",e,i)},r=function(){};a.onSuccess&&(o=a.onSuccess,delete a.onSuccess),a.onFail&&(n=a.onFail,delete a.onFail),a.onCancel&&(r=a.onCancel,delete a.onCancel);var c=function(e){var i=e||{},t=i.errorCode,a=i.result;"0"===t?o&&o.call(null,a):"-1"===t?r&&r.call(null,a):n&&n.call(null,a,t)},s=!1;switch(e){case"device.notification.alert":i(a,{title:"",buttonName:"纭畾"});break;case"device.notification.confirm":case"device.notification.prompt":i(a,{title:"",buttonLabels:["纭畾","鍙栨秷"]});break;case"device.notification.vibrate":i(a,{duration:300});break;case"device.accelerometer.watchShake":v.ios&&(s=!0,a.sensitivity=3.2);break;case"biz.util.openLink":i(a,{credible:!0,showMenuBar:!0});break;case"biz.contact.choose":i(a,{multiple:!0,startWithDepartmentId:0,users:[],corpId:d&&d.corpId||""});break;case"biz.contact.complexChoose":i(a,{startWithDepartmentId:0,selectedUsers:[],selectedDepartments:[],corpId:d&&d.corpId||""});break;case"biz.navigation.setLeft":case"biz.navigation.setRight":v.ios&&(s=!0),i(a,{show:!0,control:!1,showIcon:!0,text:""});break;case"ui.pullToRefresh.enable":v.ios&&(s=!0);break;case"device.notification.toast":i(a,{text:"toast",duration:v.android?(v.duration-3>0)+0:3,delay:0});break;case"device.notification.showPreloader":i(a,{text:"鍔犺浇涓�...",showIcon:!0});break;case"biz.util.uploadImage":i(a,{multiple:!1});break;case"biz.util.scan":i(a,{type:"qrCode"});break;case"biz.map.search":i(a,{scope:500});break;case"biz.util.ut":var l=a.value,u=[];if(l&&"Object"==v.type(l)&&window.JSON){if(v.ios)l=JSON.stringify(l);else if(v.android){for(var p in l)u.push(p+"="+l[p]);l=u.join(",")}}else window.JSON||(l="");i(a,{value:l},!0);break;case"internal.util.encryData":var b=a.data,u=[];if("Object"==v.type(b)){for(var p in b)u.push(p+"="+b[p]);b=u.join("&")}i(a,{data:b},!0);break;case"internal.request.lwp":var b=a.body;b=JSON.stringify(b),i(a,{body:b},!0);break;case"biz.util.warn":var g=a.logName||"h5_common_error",f="url="+location.href,m=[],h=a.obj||{};for(var p in h)m.push(p+"="+h[p]);var z={msg:g+" "+f+" "+m.join(" ")};i(a,{message:z},!0);break;case"biz.navigation.setIcon":v.ios&&(s=!0),i(a,{showIcon:!0,iconIndex:"1"});break;case"biz.customContact.multipleChoose":case"biz.customContact.choose":i(a,{isShowCompanyName:!1});break;case"biz.navigation.setMenu":v.ios&&(s=!0)}if(v.android){var w=e.split("."),y=w.pop(),I=w.join("."),k=a||{};k.onSuccess=o,k.onFail=n;try{window.nuva.require(I)[y](k)}catch(e){console.log(e)}}else v.ios&&(s?(WebViewJavascriptBridge.registerHandler(e,function(e,i){c({errorCode:"0",errorMessage:"鎴愬姛",result:e}),i&&i({errorCode:"0",errorMessage:"鎴愬姛"})}),WebViewJavascriptBridge.callHandler(e,a)):WebViewJavascriptBridge.callHandler(e,a,c))}var a=["backbutton","online","offline","pause","resume","hostTaskEvent","swipeRefresh"],o=["device.notification.alert","device.notification.confirm","device.notification.prompt","device.notification.vibrate","device.accelerometer.watchShake","device.accelerometer.clearShake","biz.util.open","biz.util.openLink","biz.util.share","biz.util.ut","biz.util.datepicker","biz.util.timepicker","biz.user.get","biz.navigation.setLeft","biz.navigation.setRight","biz.navigation.setTitle","biz.navigation.back","device.notification.toast","device.notification.showPreloader","device.notification.hidePreloader","device.geolocation.get","biz.util.uploadImage","biz.util.previewImage","ui.input.plain","device.notification.actionSheet","biz.util.qrcode","device.connection.getNetworkType","runtime.info","biz.ding.post","biz.telephone.call","biz.chat.chooseConversation","biz.contact.createGroup","biz.util.datetimepicker","biz.util.chosen","device.base.getUUID","device.base.getInterface","device.launcher.checkInstalledApps","device.launcher.launchApp","ui.progressBar.setColors","runtime.permission.requestAuthCode","runtime.permission.requestJsApis","ui.pullToRefresh.enable","ui.pullToRefresh.stop","ui.pullToRefresh.disable","ui.webViewBounce.enable","ui.webViewBounce.disable","biz.chat.getConversationInfo","biz.map.search","biz.map.locate","biz.util.scan","biz.contact.choose","biz.contact.complexChoose","util.localStorage.getItem","util.localStorage.setItem","util.localStorage.removeItem","biz.navigation.createEditor","biz.navigation.finishEditor","biz.chat.pickConversation","device.notification.modal","biz.navigation.setIcon","biz.navigation.close","biz.util.uploadImageFromCamera","internal.lwp.call","device.geolocation.openGps","biz.util.test","internal.microapp.checkInstalled","internal.user.getRole","device.notification.extendModal","internal.request.lwp","biz.user.secretID","internal.util.encryData","biz.customContact.choose","biz.customContact.multipleChoose","biz.util.pageClick","biz.chat.chooseConversationByCorpId","biz.chat.toConversation","biz.chat.open","device.base.getSettings","internal.log.upload","biz.navigation.goBack","ui.nav.preload","ui.nav.go","ui.nav.recycle","ui.nav.close","ui.nav.getCurrentId","runtime.message.post","runtime.message.fetch","biz.navigation.setMenu","ui.drawer.init","ui.drawer.config","ui.drawer.enable","ui.drawer.disable","ui.drawer.open","ui.drawer.close","biz.util.uploadAttachment","biz.cspace.preview","biz.cspace.saveFile","internal.hpm.get","internal.hpm.update","preRelease.appLink.open","internal.request.getSecurityToken","biz.clipboardData.setData","biz.util.warn","internal.phoneContact.add","device.base.getSettings","ui.tab.init","ui.tab.start","ui.tab.config","ui.tab.select","ui.tab.add","ui.tab.remove","biz.intent.fetchData","biz.chat.locationChatMessage","biz.navigation.popGesture","biz.util.warn","biz.util.multiSelect","biz.contact.getMobileContact","biz.telephone.showCallMenu","internal.notify.send","biz.util.presentWindow","biz.notify.send","internal.util.getCorpIdByOrgId","internal.util.getOrgIdByCorpId","biz.contact.changeCustomerFollower","device.audio.download","device.audio.play","device.audio.onPlayEnd","device.audio.resume","device.audio.pause","device.audio.stop","device.audio.startRecord","device.audio.stopRecord","device.audio.onRecordEnd","device.audio.upload","device.base.getScanWifiList","biz.alipay.pay","biz.alipay.auth","biz.map.view","biz.util.fetchImageData","internal.contact.chooseMobileContact","biz.util.scanCard","biz.util.addDesktopShortcuts","internal.util.isSimulator","internal.util.getWua","internal.beacon.detectBeacons","biz.util.timestamp","util.domainStorage.getItem","util.domainStorage.setItem","util.domainStorage.removeItem","util.domainStorage.clearItems","internal.host.lwp","internal.host.query","internal.host.cancel","device.nfc.nfcRead","device.nfc.nfcWrite"],n="1.0.0",r=e.navigator.userAgent,c=r.match(/AliApp\(\w+\/([a-zA-Z0-9.-]+)\)/);null===c&&(c=r.match(/DingTalk\/([a-zA-Z0-9.-]+)/));var s=c&&c[1],l=!1,d=null,u="runtime.permission.requestJsApis",p=null,b=!1,v={ios:/iPhone|iPad|iPod/i.test(r),android:/Android/i.test(r),version:s,support:"1.2.2"===s||"1.3.2"===s,ability:"",isReady:!1,on:document.addEventListener,config:function(e){e&&(d={corpId:e.corpId,appId:e.appId||-1,timeStamp:e.timeStamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:e.jsApiList},e.agentId&&(d.agentId=e.agentId))},error:function(e){p=e},ready:function(i){var t=function(e){if(!e)return console.log("bridge鍒濆鍖栧け璐�");if(v.isReady=!0,null!==d&&d.signature){if(v.ios)e.callHandler(u,d,function(t){var a=t||{},o=a.errorCode,n=a.errorMessage||"";a.result,"0"===o?i(e):setTimeout(function(){p&&p({message:"鏉冮檺鏍￠獙澶辫触 "+n,errorCode:3})})});else if(v.android){var t=u.split("."),o=t.pop(),r=t.join(".");e(function(){i(e)},function(e){setTimeout(function(){var i=e&&e.errorMessage||"";p&&p({message:"鏉冮檺鏍￠獙澶辫触 "+i,errorCode:3})})},r,o,d)}}else i(e);if(l===!1&&(l=!0,a.forEach(function(i){v.ios&&e.registerHandler(i,function(e,t){var a=document.createEvent("HTMLEvents");a.data=e,a.detail=e,a.initEvent(i),document.dispatchEvent(a),t&&t({errorCode:"0",errorMessage:"鎴愬姛"})})}),null===d)){var c={url:encodeURIComponent(window.location.href),js:n,cid:d&&d.corpId||""};v.biz.util.ut({key:"dd_open_js_monitor",value:JSON.stringify(c),onSuccess:function(e){}})}};if(v.ios&&e.WebViewJavascriptBridge){try{WebViewJavascriptBridge.init(function(e,i){})}catch(e){console.log(e.message)}return t(WebViewJavascriptBridge)}if(v.android&&e.WebViewJavascriptBridgeAndroid)return t(WebViewJavascriptBridgeAndroid);if(v.ios)document.addEventListener("WebViewJavascriptBridgeReady",function(){if("undefined"==typeof WebViewJavascriptBridge)return console.log("WebViewJavascriptBridge 鏈畾涔�");try{WebViewJavascriptBridge.init(function(e,i){})}catch(e){console.log(e.message)}b=!0,t(WebViewJavascriptBridge)},!1);else{if(!v.android)return console.log("寰堟姳姝夛紝灏氭湭鏀寔鎮ㄦ墍鎸佽澶�");var o=function(){try{e.WebViewJavascriptBridgeAndroid=e.nuva.require(),b=!0,t(WebViewJavascriptBridgeAndroid)}catch(e){console.log("window.nuva.require鍑洪敊",e.message),t(null)}};e.nuva&&(void 0===e.nuva.isReady||e.nuva.isReady)?o():document.addEventListener("runtimeready",function(){o()},!1)}},type:function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},compareVersion:function(e,i,t){if("string"!=typeof e||"string"!=typeof i)return!1;for(var a,o,n=e.split("."),r=i.split(".");a===o&&r.length>0;)a=n.shift(),o=r.shift();return t?(0|o)>=(0|a):(0|o)>(0|a)}},g=function(e,i){for(var t=e.split("."),a=v,o=0,n=t.length;n>o;o++)o===n-1&&(a[t[o]]=i),"undefined"==typeof a[t[o]]&&(a[t[o]]={}),a=a[t[o]]};o.forEach(function(e){g(e,function(i){t(e,i)})}),v.__ns=g,v.biz.util.pageClick=function(e){var i="open_micro_log_record_client",t=+new Date,a=e.corpId,o=e.agentId;a||(a=d&&d.corpId||""),o||(o=d&&d.agentId||"");var n={visitTime:t,clickType:2,clickButton:e.clickButton||"",url:location.href,corpId:a,agentId:o};v.biz.util.ut({key:i,value:n})},e.dd=v,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=v:"function"==typeof define&&(define.amd||define.cmd)&&define(function(){return v})}(this);